let loading_inveral;jQuery((function(){let body=$("body"),$app=$(document).find("app");"false"!==body.attr("timer")&&init_countdown("/get/home/countdown/_countdown",$(document).find('[data-react="countdown,load"]'))}));const init_countdown=(url,append)=>{let $countdown_container,data={element_include:!0},status;$.post(url,data,data=>{let $app=$(document).find("app");append.append(data),$countdown_container=$(document).find("countdown"),$countdown_container.attr("active","true"),url="/do/countdown/check_running";let info_card_status=!1;loading_inveral=setInterval(()=>{console.log("CHECKING COUNTDOWN RUNNING..."),status=check_countdown_running(url,$countdown_container),status?(start_countdown(),setTimeout(()=>info_card_exists($app),2e3),clearInterval(loading_inveral)):info_card_status||(info_card_exists($app),info_card_status=!0)},1e3)})},check_countdown_running=(url,append)=>{let $app=$(document).find("app"),status=!1;return $.ajax({url:url,async:!1,dataType:"JSON",method:"GET",success:data=>{console.log(data.status),data.status&&(append.attr("active",!0),clearInterval(loading_inveral),setTimeout(()=>info_card_exists($app),2e3)),status=data.status},error:data=>console.error(data)}),status},get_due_time=url=>{let due={};return $.ajax({url:url,async:!1,dataType:"JSON",method:"POST",success:data=>{due=data},error:data=>{console.error(data)}}),due},start_countdown=()=>{let $pyro=$(document).find(".pyro"),$output_hours=document.getElementById("countdown_hours"),$output_minutes=document.getElementById("countdown_minutes"),$output_seconds=document.getElementById("countdown_seconds"),due=get_due_time("/do/countdown/get_timestamps"),exact_due=new Date(due.due_timestamp).getTime(),x=setInterval(()=>{let now=(new Date).getTime(),distance=exact_due-now,days=Math.floor(distance/864e5),hours=Math.floor(distance%864e5/36e5),minutes=Math.floor(distance%36e5/6e4),seconds=Math.floor(distance%6e4/1e3);if(hours=hours<10?"0"+hours:hours,minutes=minutes<10?"0"+minutes:minutes,seconds=seconds<10?"0"+seconds:seconds,$output_hours.innerHTML=hours,$output_minutes.innerHTML=minutes,$output_seconds.innerHTML=seconds,distance<1){$pyro.attr("active",!0),show_info_card("Countdown is done! Let's go to LIDL!");const audioContext=new AudioContext,element=document.querySelector("audio"),source=audioContext.createMediaElementSource(element);source.connect(audioContext.destination),element.play(),$output_hours.innerHTML="LE",$output_minutes.innerHTML="TS",$output_seconds.innerHTML="GO",clearInterval(x)}},1e3);setTimeout(()=>{$(document).find("s").addClass("active")},1e3)},info_card_exists=append=>{let $info_card=append.find("info-card-model"),url="/get/home/countdown/_info_card.php";$info_card.length>0?($info_card.attr("active",!1),setTimeout(()=>{$info_card.remove(),load_info_card(url,append)},400)):load_info_card(url,append)},load_info_card=(url,append)=>{$.get(url,data=>{data&&append.append(data),setTimeout(()=>{append.find("info-card-model").attr("active",!0)},100)}).fail(data=>{console.error(data)})};